var Reveal=function(e,t){this.coords=[],this.element=e,this.options=t,this.init()};Reveal.VERSION="1.0.0",Reveal.CONFIG={backgroundColor:"#FFFFFF",shadowColor:"#000000",shadowBlur:"30",lineCap:"round",persistence:1e3},Reveal.prototype.init=function(){var e=this,t=this.element,i=this.options,a=document.createElement("div");a.className="bg-canvas",a.style.position="absolute",a.style.top=0,a.style.left=0,a.style.right=0,a.style.bottom=0,a.style.filter="blur(10px) contrast(175%)",a.style.WebkitFilter="blur(10px) contrast(175%)",a.style.backgroundImage="url('"+i.url+"')",a.style.backgroundSize="cover",a.style.zIndex="-9999",t.append(a);var o=document.createElement("canvas");o.width=t.clientWidth,o.height=t.clientHeight,t.append(o);var n=document.createElement("canvas");n.width=t.clientWidth,n.height=t.clientHeight,(ctx=o.getContext("2d"))&&(backgroundImage=new Image,backgroundImage.src=i.url,backgroundImage.onload=function(){e.draw(o,n,backgroundImage)}),t.addEventListener("mousemove",function(t){e.coords.unshift({t:Date.now(),x:t.clientX,y:t.clientY})})},Reveal.prototype.draw=function(e,t,a){requestAnimationFrame(this.draw.bind(this,e,t,a));var o=e.getContext("2d"),n=t.getContext("2d");for(n.lineCap=Reveal.CONFIG.lineCap,n.shadowColor=Reveal.CONFIG.shadowColor,n.shadowBlur=Reveal.CONFIG.shadowBlur,imageX=e.width,imageY=e.width/a.naturalWidth*a.naturalHeight,imageY<e.height&&(imageY=e.height,imageX=e.height/a.naturalHeight*a.naturalWidth),i=0;i<this.coords.length;)Reveal.CONFIG.persistence<Date.now()-this.coords[i].t?this.coords.length=i:i++;for(n.clearRect(0,0,t.width,t.height),i=1;i<this.coords.length;i++)n.strokeStyle="rgba(0,0,0,"+Math.max(1-(Date.now()-this.coords[i].t)/Reveal.CONFIG.persistence,0)+")",n.lineWidth=90,n.beginPath(),n.moveTo(this.coords[i-1].x,this.coords[i-1].y),n.lineTo(this.coords[i].x,this.coords[i].y),n.stroke();o.drawImage(a,0,0,imageX,imageY),o.globalCompositeOperation="destination-in",o.drawImage(t,0,0),o.globalCompositeOperation="source-over"};for(var elements=document.getElementsByClassName("canvas-background"),i=0;i<elements.length;i++)new Reveal(elements[i],elements[i].dataset);